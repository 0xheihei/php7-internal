## 5.1 Zend内存池
zend针对内存的操作封装了一层，实现了更高效率的内存利用，其实现主要参考了tcmalloc的设计。

zend内存池有两种粒度的内存块：chunk、page，每个chunk的大小为2M，page大小为4KB，一个chunk被切割为512个page，申请内存时按照三种情况处理：
* __Huge:__ 申请内存大于2M，直接调用系统分配
* __Large:__ 申请内存大于3092B(3/4 page_size)，小于2044KB(511 page_size)，此时分配n个page大小的内存
* __Small:__ 申请内存小于3092B(3/4 page_size)，内存池提前定义好了30种同等大小的内存(8,16,24,32，...3072)，他们分配在不同的page上(不同大小的内存可能会分配在多个连续的page)，申请内存时直接在对应page上查找可用位置

接下来看下内存池的初始化以及三种内存分配的过程。

### 5.1.1 内存池初始化

### 5.1.2 内存分配

#### 5.1.2.1 Huge分配
#### 5.1.2.2 Large分配
#### 5.1.2.3 Small分配

### 5.1.3 内存释放


